(this["webpackJsonpreact-jwt"]=this["webpackJsonpreact-jwt"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n.n(c),o=n(10),s=n.n(o),i=(n(90),n.p,n(91),n(16)),l=n(15),u=n(139),d=n(23),j=n(13),b="LOGIN",h="LOGOUT",f=function(e){return{type:b,payload:e}},g=function(){return{type:h}},O="INIT_INTEREST",p="ADD_INTEREST",m="REMOVE_INTEREST",y=n(145),x=n(147),v=n(133),T=n(74),w=n.n(T),S=n(60),I=n.n(S),k=Object(v.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}})),C=function(e){var t=e.interests,n=e.add,r=e.deleteI,o=k(),s=Object(c.useState)(""),i=Object(l.a)(s,2),u=i[0],d=i[1];Object(j.b)();return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Interests"}),Object(a.jsxs)("div",{style:{width:300,display:"flex",margin:"auto",flexFlow:"row wrap"},children:[Object(a.jsx)(y.a,{style:{alignSelf:"flex-start"},type:"text",placeholder:"Add new Interest",onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(n(u),d(""))},value:u}),t.map((function(e,t){return Object(a.jsx)(x.a,{label:e,onDelete:function(){return function(e){r(e)}(t)},deleteIcon:Object(a.jsx)(I.a,{}),className:o.chip})}))]})]})},E=function(e){var t=e.interests,n=e.add,r=k(),o=Object(c.useState)(""),s=Object(l.a)(o,2),i=s[0],u=s[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Hobbies"}),Object(a.jsx)("div",{style:{width:300,display:"flex",margin:"auto",flexFlow:"row wrap"},children:t.map((function(e,t){return Object(a.jsx)(x.a,{icon:Object(a.jsx)(w.a,{}),label:e,onDelete:function(){return function(e){console.log(e)}(t)},deleteIcon:Object(a.jsx)(I.a,{}),className:r.chip},t)}))}),Object(a.jsx)(y.a,{type:"text",placeholder:"Add new Hobby",onChange:function(e){u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&n(i)},value:i})]})},L=function(e){var t=Object(c.useState)({}),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(j.c)((function(e){return e.auth})),b=Object(j.c)((function(e){return e.interests})),h=Object(j.b)();Object(c.useEffect)((function(){console.log(s),s.isLoggedIn||Object(i.c)("/login"),fetch("".concat(d.a,"/user"),{method:"GET",credentials:"include",headers:{Authorization:"Bearer ".concat(s.tokens.access)}}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error&&"Token Expired!"===e.error.message&&fetch("".concat(d.a,"/auth/refresh"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s.refresh})}).then((function(e){return e.json()})).then((function(e){e.error&&h(g()),f(e)})),e.result&&o(e.result)}))}),[s]),Object(c.useEffect)((function(){r.fname&&h(function(e){return{type:O,dataList:e}}(r.interests))}),[r]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(u.a,{onClick:function(){return h(g()),void Object(i.c)("/login")},children:"Logout"}),Object(a.jsxs)("h1",{style:{color:"#645454"},children:["Welcome ",r.fname]}),r.email&&Object(a.jsx)(C,{interests:b,add:function(e){var t=[];t.push(e),console.log(t),fetch("".concat(d.a,"/user/interests"),{method:"PATCH",credentials:"include",headers:{Authorization:"Bearer ".concat(s.tokens.access),"Content-Type":"application/json"},body:JSON.stringify({interests:t})}).then((function(e){return e.json()})).then((function(e){e.message&&h(function(e){return{type:p,dataList:e}}(t))}))},deleteI:function(e){fetch("".concat(d.a,"/user/interests"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s.tokens.access),"Content-Type":"application/json"},body:JSON.stringify({index:e})}).then((function(e){return e.json()})).then((function(t){(t.message="Interest deleted successfully!")&&h(function(e){return{type:m,data:e}}(e))}))}}),r.email&&Object(a.jsx)(E,{interests:r.hobbies,add:function(e){var t=[];t.push(e),fetch("".concat(d.a,"/user/hobbies"),{method:"POST",headers:{Authorization:"Bearer ".concat(s.tokens.access),"Content-Type":"application/json"},body:JSON.stringify({hobbies:t})}).then((function(e){return e.json()})).then((function(t){t.message&&o(r.hobbies.push(e))}))}})]})},N=n(17),B=n(18),P=n(75),D=(n(100),n(137)),A=n(148),R=n(140),J=n(143),_=n(144),F=n(141),z=n(142),H=n(146);function M(e){return Object(a.jsx)(H.a,Object(B.a)({elevation:6,variant:"filled"},e))}function G(e){return Object(a.jsx)(H.a,Object(B.a)({elevation:6,variant:"filled"},e))}var W={Dashboard:L,Login:function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)({}),b=Object(l.a)(s,2),h=b[0],g=b[1],O=Object(c.useState)(!1),p=Object(l.a)(O,2),m=p[0],x=p[1],v=Object(c.useState)(!1),T=Object(l.a)(v,2),w=T[0],S=T[1],I=Object(j.b)(),k=Object(j.c)((function(e){return e.auth}));Object(c.useEffect)((function(){k.isLoggedIn&&Object(i.c)("/dashboard")}),[]);var C=function(){},E=function(){x(!0),console.log("fetching login"),fetch("".concat(d.a,"/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.table(e),e.error&&(console.log(e.error),L(e.error)),e.accessToken&&(I(f(e)),o({email:"",password:""}),Object(i.c)("/dashboard"))})).catch((function(e){console.log(e.message),L(e)})),x(!1)},L=function(e){g(e),setTimeout((function(){return g({})}),2e3)},H=function(e){e.preventDefault(),E()},G=function(e){var t=e.target.value;o(Object(B.a)(Object(B.a)({},r),{},Object(N.a)({},e.target.name,t)))};return Object(a.jsxs)("div",{style:{width:300,margin:"auto",position:"relative"},children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:H,style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(y.a,{style:{marginTop:20},placeholder:"Email",label:"Email",name:"email",value:r.email,onChange:G,variant:"filled"}),Object(a.jsx)(D.a,{style:{marginTop:20},type:w?"text":"password",placeholder:"Password",label:"Password",name:"password",value:r.password,onChange:G,onKeyPress:function(e){"Enter"===e.key&&E()},endAdornment:Object(a.jsx)(A.a,{position:"end",children:Object(a.jsx)(R.a,{"aria-label":"toggle password visibility",onClick:function(){S(!w)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:w?Object(a.jsx)(F.a,{}):Object(a.jsx)(z.a,{})})})}),function(){var e=r.email,t=r.password;return e&&t}()?Object(a.jsx)(u.a,{onClick:H,style:{marginTop:20,marginBottom:20,height:50},variant:"outlined",color:"primary",children:"Login"}):Object(a.jsx)(u.a,{onClick:H,style:{marginTop:20,marginBottom:20,height:50},variant:"outlined",color:"primary",disabled:!0,children:"Login"}),h&&Object(a.jsx)(J.a,{in:h.message,children:Object(a.jsx)(M,{severity:"error",children:h.message})})]}),Object(a.jsxs)("p",{children:["Not yet registered ",Object(a.jsx)(i.a,{to:"/register",children:"Register"})]}),Object(a.jsx)(P.GoogleLogin,{clientId:"387852080754-6gfsprtf26hlgpivgnhvfu61e2h4euju.apps.googleusercontent.com",buttonText:"Login",onSuccess:C,onFailure:C,cookiePolicy:"single_host_origin"}),m&&Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",zIndex:3,backgroundColor:"ffffffaa",position:"absolute",top:0},children:Object(a.jsx)(_.a,{})})]})},Register:function(e){var t,n=Object(c.useState)({email:"",fname:"",lname:"",dob:"",password:""}),r=Object(l.a)(n,2),o=r[0],s=r[1],b=Object(c.useState)({}),h=Object(l.a)(b,2),g=h[0],O=h[1],p=Object(j.b)(),m=Object(c.useState)(!1),x=Object(l.a)(m,2),v=x[0],T=x[1],w=function(e){e.preventDefault(),S()},S=function(){T(!0),fetch("".concat(d.a,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json","cache-control":"no-cache"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.table(e),e.error&&(console.log(e.error),O(e.error),setTimeout((function(){return O({})}),2e3)),e.accessToken&&(p(f(e)),Object(i.c)("/dashboard"))})),T(!1)},I=function(e){var t=e.target.value;s(Object(B.a)(Object(B.a)({},o),{},Object(N.a)({},e.target.name,t)))};return Object(a.jsxs)("div",{style:{width:300,margin:"auto"},children:[Object(a.jsx)("h2",{children:"Register"}),Object(a.jsxs)("form",{onSubmit:w,style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(y.a,{style:{marginTop:20},type:"email",placeholder:"Email",label:"Email",name:"email",value:o.email,onChange:I,variant:"filled"}),Object(a.jsx)(y.a,{style:{marginTop:20},placeholder:"Firstname",label:"Firstname",name:"fname",value:o.fname,onChange:I,variant:"filled"}),Object(a.jsx)(y.a,{style:{marginTop:20},placeholder:"Lastname",label:"Lastname",name:"lname",value:o.lname,onChange:I,variant:"filled"}),Object(a.jsx)(y.a,(t={style:{marginTop:20},label:"Birthday"},Object(N.a)(t,"label","Birthday"),Object(N.a)(t,"defaultValue","2000-01-01"),Object(N.a)(t,"type","date"),Object(N.a)(t,"name","dob"),Object(N.a)(t,"value",o.dob),Object(N.a)(t,"onChange",I),Object(N.a)(t,"variant","filled"),t)),Object(a.jsx)(y.a,{style:{marginTop:20},type:"password",placeholder:"Password",label:"Password",name:"password",value:o.password,onChange:I,InputLabelProps:{shrink:!1},variant:"filled"}),o.email&&o.fname&&o.lname&&o.dob&&o.password?Object(a.jsx)(u.a,{onClick:w,style:{marginTop:20,marginBottom:20,height:50},variant:"outlined",color:"primary",children:"Register"}):Object(a.jsx)(u.a,{onClick:w,style:{marginTop:20,marginBottom:20,height:50},variant:"outlined",color:"primary",disabled:!0,children:"Register"}),g&&Object(a.jsx)(J.a,{in:g.message,children:Object(a.jsx)(G,{severity:"error",children:g.message})})]}),Object(a.jsxs)("p",{children:["Already registered ",Object(a.jsx)(i.a,{to:"/login",children:"Login"})]}),v&&Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",zIndex:3,backgroundColor:"ffffffaa",position:"absolute",top:0},children:Object(a.jsx)(_.a,{})})]})}},K=function(){Object(j.b)(),Object(j.c)((function(e){return e.auth}));return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",padding:20,backgroundColor:"#303f9f",color:"white"},children:Object(a.jsx)("h2",{style:{margin:0,fontWeight:"bold"},children:"ReactJWT"})})},V=W.Dashboard,Y=W.Login,U=W.Register;var q=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(K,{}),Object(a.jsxs)(i.b,{children:[Object(a.jsx)(Y,{path:"/"}),Object(a.jsx)(Y,{path:"/login"}),Object(a.jsx)(U,{path:"/register"}),Object(a.jsx)(V,{path:"/dashboard"})]})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,149)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},X=n(46),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,tokens:{access:"",refresh:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{tokens:{access:t.payload.accessToken,refresh:t.payload.refreshToken},isLoggedIn:!0};case h:return{tokens:{access:"",refresh:""},isLoggedIn:!1};default:return e}},$=n(43),ee="INIT_HOBBY",te="ADD_HOBBY",ne="REMOVE_HOBBY",ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return t.datalist;case te:return[].concat(Object($.a)(e),Object($.a)(t.dataList));case ne:return e.filter((function(e,n){return n!==t.index}));default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.dataList;case p:return[].concat(Object($.a)(e),Object($.a)(t.dataList));case m:return e.filter((function(e,n){return n!==t.data}));default:return e}},re="INIT_PROFILE",oe="SET_NAME",se="SET_EMAIL",ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{email:"",fname:"",lname:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return t.data;case oe:return Object(B.a)(Object(B.a)({},e),{},{fname:t.data.fname,lname:t.data.lname});case se:return Object(B.a)(Object(B.a)({},e),{},{email:t.data.email});default:return e}},le=function(){try{var e=localStorage.getItem("ghch8u7");return null===e?{auth:{isLoggedIn:!1,tokens:{access:"",refresh:""}},hobbies:[],interests:[],profile:{fname:"",lname:"",email:""}}:JSON.parse(e)}catch(t){return console.log(t),{auth:{isLoggedIn:!1,tokens:{access:"",refresh:""}},hobbies:[],interests:[],profile:{fname:"",lname:"",email:""}}}}(),ue=Object(X.b)({auth:Z,hobbies:ae,interests:ce,profile:ie}),de=Object(X.c)(ue,le);de.subscribe((function(){console.log("Saving to local store"),function(e){try{var t=JSON.stringify(e);localStorage.setItem("ghch8u7",t)}catch(n){console.log(n)}}(de.getState())}));var je=de;s.a.render(Object(a.jsx)(j.a,{store:je,children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(q,{})})}),document.getElementById("root")),Q()},23:function(e){e.exports=JSON.parse('{"a":"https://jwtauth.tk"}')},90:function(e,t,n){},91:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.bda0ed6f.chunk.js.map