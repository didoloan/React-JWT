(this["webpackJsonpreact-jwt"]=this["webpackJsonpreact-jwt"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"a":"https://jwtauth.tk"}')},59:function(e,t,n){},60:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),o=n.n(c),s=n(7),r=n.n(s),i=(n(59),n.p,n(60),n(13)),l=n(15),d=n(18),h=n(12),u="LOGIN",j="LOGOUT",b=function(e){return{type:u,payload:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"logout";return{type:j,payload:e}},p=n(98),f=function(e){var t=e.interests,n=e.add,o=Object(c.useState)(""),s=Object(l.a)(o,2),r=s[0],i=s[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Interests"}),Object(a.jsx)("div",{style:{width:300,display:"flex",margin:"auto",flexFlow:"row wrap"},children:t.map((function(e,t){return Object(a.jsx)("p",{style:{padding:5,margin:0,marginLeft:5,boxShadow:"0 2px 5px #aaa",borderRadius:5},children:e})}))}),Object(a.jsx)(p.a,{type:"text",placeholder:"Add new Interest",onChange:function(e){i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&n(r)},value:r})]})},O=function(e){var t=e.interests,n=e.add,o=Object(c.useState)(""),s=Object(l.a)(o,2),r=s[0],i=s[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Hobbies"}),Object(a.jsx)("div",{style:{width:300,display:"flex",margin:"auto",flexFlow:"row wrap"},children:t.map((function(e,t){return Object(a.jsx)("p",{style:{padding:5,margin:0,marginLeft:5,boxShadow:"0 2px 5px #aaa",borderRadius:5},children:e})}))}),Object(a.jsx)(p.a,{type:"text",placeholder:"Add new Hobby",onChange:function(e){i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&n(r)},value:r})]})},m=function(e){var t=Object(c.useState)({}),n=Object(l.a)(t,2),o=n[0],s=n[1],r=Object(h.c)((function(e){return e.auth})),u=Object(h.b)();Object(c.useEffect)((function(){console.log(r),r.isLoggedIn||Object(i.c)("/login"),fetch("".concat(d.a,"/user"),{method:"GET",headers:{Authorization:"Bearer ".concat(r.tokens.access)}}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error&&u(g),e.result.email&&s(e.result)}))}),[r.isLoggedIn]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{style:{color:"#645454"},children:["Welcome ",o.fname]}),o.email&&Object(a.jsx)(f,{interests:o.interests,add:function(e){var t=[];t.push(e),console.log(t),fetch("".concat(d.a,"/user/interests"),{method:"POST",headers:{Authorization:"Bearer ".concat(r.tokens.access),"Content-Type":"application/json"},body:JSON.stringify({interests:t})}).then((function(e){return e.json()})).then((function(t){t.message&&s(o.interests.push(e))}))}}),o.email&&Object(a.jsx)(O,{interests:o.hobbies,add:function(e){var t=[];t.push(e),fetch("".concat(d.a,"/user/hobbies"),{method:"POST",headers:{Authorization:"Bearer ".concat(r.tokens.access),"Content-Type":"application/json"},body:JSON.stringify({hobbies:t})}).then((function(e){return e.json()})).then((function(t){t.message&&s(o.hobbies.push(e))}))}})]})},y=n(24),x=n(29),v=n(99),w=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(l.a)(t,2),o=n[0],s=n[1],r=Object(h.b)(),u=Object(h.c)((function(e){return e.auth}));Object(c.useEffect)((function(){u.isLoggedIn&&Object(i.c)("/dashboard")}),[]);var j=function(e){e.preventDefault(),console.log("fetching login"),fetch("".concat(d.a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json","cache-control":"no-cache"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.table(e),e.accessToken&&(r(b(e)),Object(i.c)("/dashboard"))}))},g=function(e){var t=e.target.value;s(Object(x.a)(Object(x.a)({},o),{},Object(y.a)({},e.target.name,t)))};return Object(a.jsxs)("div",{style:{width:300,margin:"auto"},children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:j,style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(p.a,{style:{marginTop:20},placeholder:"Email",name:"email",value:o.email,onChange:g}),Object(a.jsx)(p.a,{style:{marginTop:20},type:"password",placeholder:"Password",name:"password",value:o.password,onChange:g}),Object(a.jsx)(v.a,{onClick:j,style:{marginTop:20},variant:"contained",color:"primary",children:"Login"})]}),Object(a.jsxs)("p",{children:["Not yet registered ",Object(a.jsx)(i.a,{to:"/login",children:"Register"})]})]})},T=function(e){var t=Object(c.useState)({email:"",fname:"",lname:"",dob:"",password:""}),n=Object(l.a)(t,2),o=n[0],s=n[1],r=Object(h.b)(),u=function(e){e.preventDefault(),j()},j=function(){fetch("".concat(d.a,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json","cache-control":"no-cache"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.table(e),e.accessToken&&(r(b(e)),Object(i.c)("/dashboard"))}))},g=function(e){var t=e.target.value;s(Object(x.a)(Object(x.a)({},o),{},Object(y.a)({},e.target.name,t)))};return Object(a.jsxs)("div",{style:{width:300,margin:"auto"},children:[Object(a.jsx)("h2",{children:"Register"}),Object(a.jsxs)("form",{onSubmit:u,style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(p.a,{style:{marginTop:20},type:"email",placeholder:"Email",name:"email",value:o.email,onChange:g}),Object(a.jsx)(p.a,{style:{marginTop:20},placeholder:"Firstname",name:"fname",value:o.fname,onChange:g}),Object(a.jsx)(p.a,{style:{marginTop:20},placeholder:"Lastname",name:"lname",value:o.lname,onChange:g}),Object(a.jsx)(p.a,{style:{marginTop:20},label:"Birthday",defaultValue:"2000-01-01",type:"date",name:"dob",value:o.dob,onChange:g}),Object(a.jsx)(p.a,{style:{marginTop:20},type:"password",placeholder:"Password",name:"password",value:o.password,onChange:g,InputLabelProps:{shrink:!1}}),Object(a.jsx)(v.a,{onClick:u,style:{marginTop:20},variant:"contained",color:"primary",children:"Register"})]}),Object(a.jsxs)("p",{children:["Already registered ",Object(a.jsx)(i.a,{to:"/login",children:"Login"})]})]})},S=function(){Object(h.b)();return Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:20,backgroundColor:"#303f9f",color:"white"},children:[Object(a.jsx)("h2",{style:{margin:0},children:"ReactJWT"}),Object(a.jsx)(v.a,{color:"danger",children:"Logout"})]})};var k=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(S,{}),Object(a.jsxs)(i.b,{children:[Object(a.jsx)(w,{path:"/login"}),Object(a.jsx)(T,{path:"/register"}),Object(a.jsx)(m,{path:"/dashboard"})]})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))},L=n(32),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,tokens:{access:"",refresh:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{tokens:{access:t.payload.accessToken,refresh:t.payload.refreshToken},isLoggedIn:!0};case j:return{tokens:{access:"",refresh:""},isLoggedIn:!1};default:return e}},P=function(){try{var e=localStorage.getItem("ghch8u7");return null===e?{auth:{isLoggedIn:!1,tokens:{access:"",refresh:""}}}:JSON.parse(e)}catch(t){return console.log(t),{auth:{isLoggedIn:!1,tokens:{access:"",refresh:""}}}}}(),J=Object(L.b)({auth:I}),N=Object(L.c)(J,P);N.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("ghch8u7",t)}catch(n){console.log(n)}}(N.getState())}));var E=N;r.a.render(Object(a.jsx)(h.a,{store:E,children:Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(k,{})})}),document.getElementById("root")),C()}},[[68,1,2]]]);
//# sourceMappingURL=main.e86909b4.chunk.js.map